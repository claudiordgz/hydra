paceOptions={elements:!0};var trackIndex=0,sfApp={scrollTimer:null,formatDate:function(a){return moment(a).fromNow()},nextPost:function(){if($(".next-post").length){var a=0,e=!1,t=new Array,i=$(".next-post"),o=i.data("current-url");if(""!=o)var s=setInterval(function(){a+=1;var n=sfThemeOptions.global.rootUrl+"/rss/"+a+"/";1==a&&(n=sfThemeOptions.global.rootUrl+"/rss/"),$.ajax({type:"GET",url:n,dataType:"xml",success:function(a){$(a).length&&$("item",a).each(function(){var a=$(this).find("link").eq(0).text();if(e){t.link=a,t.title=$(this).find("title").eq(0).text(),t.pubDate=sfApp.formatDate(new Date($(this).find("pubDate").eq(0).text()));var n=$($(this).find("description").eq(0).text());if(n.first().is("iframe")){var l=(n.first(),n.first().attr("src"));if(l.indexOf("youtube.com")>=0){var r=/youtube(-nocookie)?\.com\/(embed|v)\/([\w_-]+)/,d="",c=l.match(r);"undefined"!=c[3]&&""!=c[3]&&(t.background="http://i3.ytimg.com/vi/"+c[3]+"/0.jpg",t.cssClass="video-post")}else if(l.indexOf("vimeo.com")>=0){var r=/video\/(\d+)/,c=l.match(r);if("undefined"!=c[1]&&""!=c[1]){var p="http://vimeo.com/api/v2/video/"+c[1]+".json";console.log(p),$.ajax({type:"GET",url:p,dataType:"json",success:function(a){if(a.length){i.css("background-image",'url("'+a[0].thumbnail_large+'")'),i.addClass("video-post");var e='<div class="next-post-wrap">                                                                                <div class="next-label">Next Story</div>                                                                                <h2 class="post-title"><a href="'+t.link+'">'+t.title+'</a></h2>                                                                                <div class="post-meta">'+t.pubDate+'</div>                                                                                <div class="next-arrow"><a href="'+t.link+'"><i class="fa fa-angle-double-down"></i></a></div>                                                                            </div>';i.html(e)}}})}}}else if(n.has('img[alt*="image-post"]').length){var m=n.find('img[alt*="image-post"]');m.length&&(t.cssClass=m.attr("alt"),t.background=m.attr("src"))}else if(n.has('a[href*="youtube.com"]').length){var f=n.find('a[href*="youtube.com"]');if(f.length){var g=f.attr("href");if(""!=g){var d=g.match(/[\\?&]v=([^&#]*)/)[1];""!=d&&(t.background="http://i3.ytimg.com/vi/"+d+"/0.jpg",t.cssClass="video-post")}}}else if(n.has('a[href*="vimeo.com"]').length){var u=n.find('a[href*="vimeo.com"]'),h=u.attr("href"),r=/vimeo.com\/(\d+)/,c=h.match(r);if("undefined"!=c[1]&&""!=c[1]){var p="http://vimeo.com/api/v2/video/"+c[1]+".json";$.ajax({type:"GET",url:p,dataType:"json",success:function(a){if(a.length&&""!=a[0].thumbnail_large){i.css("background-image",'url("'+a[0].thumbnail_large+'")'),i.addClass("video-post");var e='<div class="next-post-wrap">                                                                            <div class="next-label">Next Story</div>                                                                            <h2 class="post-title"><a href="'+t.link+'">'+t.title+'</a></h2>                                                                            <div class="post-meta">'+t.pubDate+'</div>                                                                            <div class="next-arrow"><a href="'+t.link+'"><i class="fa fa-angle-double-down"></i></a></div>                                                                        </div>';i.html(e)}}})}}if(void 0!=t.link){void 0!=t.background&&""!=t.background&&i.css("background-image",'url("'+t.background+'")'),void 0!=t.cssClass&&""!=t.cssClass&&i.addClass(t.cssClass);var v='<div class="next-post-wrap">                                                            <div class="next-label">Next Story</div>                                                            <h2 class="post-title"><a href="'+t.link+'">'+t.title+'</a></h2>                                                            <div class="post-meta">'+t.pubDate+'</div>                                                            <div class="next-arrow"><a href="'+t.link+'"><i class="fa fa-angle-double-down"></i></a></div>                                                        </div>';i.html(v)}return clearInterval(s),!1}o==a&&(e=!0)})}})},2e3)}},formatBlogAjax:function(a){return a.length&&($("body").is(".post-template")||"multimedia"==$("body").attr("data-post-mode")&&($("body").is(".home-template")||$("body").is(".archive-template")||$("body").is(".tag-template")))&&jQuery.each(a,function(a,e){var t=jQuery(e),i=t.find(".post-header"),o=t.find(".post-content");if(o.has('img[alt*="image-post"]').length){var s=o.find('img[alt*="image-post"]');i.addClass(s.attr("alt")),i.css("background-image",'url("'+s.attr("src")+'")')}else if(o.has('a[href*="youtube.com"]').length){var n=o.find('a[href*="youtube.com"]');if(n.length){var l=n.attr("href");if(""!=l){i.addClass("has-background video-post");var r=i.find(".line");if(sfApp.isMobile()){i.addClass("mobile");var d=l.match(/[\\?&]v=([^&#]*)/)[1];if(""!=d){i.css("background-image",'url("http://i3.ytimg.com/vi/'+d+'/0.jpg")'),r.html('<a class="video-playback youtube" href="'+l+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",r).tooltip();var c=r.find(".video-playback");c.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}}else{var p="{videoURL:'"+l+"',containment:'self',showControls:true,startAt:0,mute:false,autoPlay:false,loop:false,opacity:1,quality:'highres'}";i.append('<div class="video player"></div>');var m=i.find(".video");m.data("property",p),m.mb_YTPlayer(),m.on("YTPStart",function(){i.addClass("playing")}),m.on("YTPPause",function(){i.removeClass("playing")}),m.on("YTPEnd",function(){i.removeClass("playing")}),r.html('<a class="video-playback youtube" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",r).tooltip()}}}}else if(o.has('iframe[src^="//www.youtube.com"]').length){var n=o.find('iframe[src^="//www.youtube.com"]'),f=/youtube(-nocookie)?\.com\/(embed|v)\/([\w_-]+)/,g=n.attr("src").match(f);if(void 0!=g[3]&&""!=g[3]){i.addClass("has-background video-post");var r=i.find(".line");if(sfApp.isMobile()){i.addClass("mobile"),i.css("background-image",'url("http://i3.ytimg.com/vi/'+g[3]+'/0.jpg")'),r.html('<a class="video-playback youtube" href="http://www.youtube.com/watch?v='+l+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",r).tooltip();var c=r.find(".video-playback");c.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}else{var l="http://www.youtube.com/watch?v="+g[3],p="{videoURL:'"+l+"', containment:'self',showControls:true, startAt:0,mute:false,autoPlay:false,loop:false, opacity:1,quality:'highres'}";i.append('<div class="video player"></div>');var m=i.find(".video");m.data("property",p),m.mb_YTPlayer(),m.on("YTPStart",function(){i.addClass("playing")}),m.on("YTPPause",function(){i.removeClass("playing")}),m.on("YTPEnd",function(){i.removeClass("playing")}),r.html('<a class="video-playback youtube" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",r).tooltip()}}}else if(o.has('a[href*="vimeo.com"]').length){var u=o.find('a[href*="vimeo.com"]'),h=u.attr("href"),f=/vimeo.com\/(\d+)/,v="",g=h.match(f);if(g.length&&(v=g[1]),""!=v){var y="http://vimeo.com/api/v2/video/"+v+".json";$.ajax({type:"GET",url:y,dataType:"json",success:function(a){if(a.length){i.addClass("has-background video-post vimeo"),i.css("background-image",'url("'+a[0].thumbnail_large+'")');var e=i.find(".line");e.html('<a class="video-playback vimeo" href="'+h+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",e).tooltip();var t=e.find(".video-playback");t.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}}})}}else if(o.has('iframe[src^="//player.vimeo.com"]').length){var u=o.find('iframe[src^="//player.vimeo.com"]'),h=u.attr("src"),f=/video\/(\d+)/,v="",g=h.match(f);if(null!=g&&(v=g[1]),""!=v){var y="http://vimeo.com/api/v2/video/"+v+".json";$.ajax({type:"GET",url:y,dataType:"json",success:function(a){if(a.length){i.addClass("has-background video-post vimeo"),i.css("background-image",'url("'+a[0].thumbnail_large+'")');var e=i.find(".line");e.html('<a class="video-playback vimeo" href="https://vimeo.com/'+v+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",e).tooltip();var t=e.find(".video-playback");t.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}}})}}else if(o.has('a[href*="soundcloud.com"]').length){var b=o.find('a[href*="soundcloud.com"]');i.append('<div class="audio sc-player"></div>');var k=i.find(".audio");b.appendTo(k),i.addClass("has-background audio-post"),k.scPlayer({randomize:!0});var r=i.find(".line");r.html('<a class="audio-playback" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".audio-playback",r).tooltip()}else if(o.has('iframe[src^="https://w.soundcloud.com"]').length){var b=o.find('iframe[src^="https://w.soundcloud.com"]'),f=/soundcloud.com\/tracks\/(\d+)/,g=b.attr("src").match(f);if(g.length&&""!=g[1]){i.append('<div class="audio sc-player"><a href="http://api.soundcloud.com/tracks/'+g[1]+'"></a></div>');var k=i.find(".audio");i.addClass("has-background audio-post"),k.scPlayer({randomize:!0});var r=i.find(".line");r.html('<a class="audio-playback" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".audio-playback",r).tooltip()}}t.addClass("formated")}),a},formatBlog:function(){$(".post").length&&($("body").is(".post-template")||"multimedia"==$("body").attr("data-post-mode")&&($("body").is(".home-template")||$("body").is(".archive-template")||$("body").is(".tag-template")))&&$(".post").imagesLoaded(function(){$(".post:not(.formated)").each(function(){var a=$(this),e=a.find(".post-header"),t=a.find(".post-content"),i=e.find(".line");if(t.has('a[href*="youtube.com"]').length){var o=t.find('a[href*="youtube.com"]');if(o.length){var s=o.attr("href");if(""!=s)if(e.addClass("has-background video-post"),sfApp.isMobile()){e.addClass("mobile");var n=s.match(/[\\?&]v=([^&#]*)/)[1];if(""!=n){e.css("background-image",'url("http://i3.ytimg.com/vi/'+n+'/0.jpg")'),i.html('<a class="video-playback youtube" href="'+s+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon"),$(".video-playback",i).tooltip();var l=i.find(".video-playback");l.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}}else{var r="{videoURL:'"+s+"',containment:'self',showControls:true,startAt:0,mute:false,autoPlay:false,loop:false,opacity:1,quality:'highres'}";e.append('<div class="video player"></div>');var d=e.find(".video");d.data("property",r),d.mb_YTPlayer(),d.on("YTPStart",function(){e.addClass("playing")}),d.on("YTPPause",function(){e.removeClass("playing")}),d.on("YTPEnd",function(){e.removeClass("playing")}),i.html('<a class="video-playback youtube" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon"),$(".video-playback",i).tooltip()}}}else if(t.has('iframe[src^="//www.youtube.com"]').length){var o=t.find('iframe[src^="//www.youtube.com"]'),c=/youtube(-nocookie)?\.com\/(embed|v)\/([\w_-]+)/,p=o.attr("src").match(c);if(void 0!=p[3]&&""!=p[3])if(e.addClass("has-background video-post"),i.addClass("has-icon"),sfApp.isMobile()){e.addClass("mobile"),e.css("background-image",'url("http://i3.ytimg.com/vi/'+p[3]+'/0.jpg")'),i.html('<a class="video-playback youtube" href="http://www.youtube.com/watch?v='+s+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>');var l=i.find(".video-playback");$(".video-playback",i).tooltip(),l.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}else{var s="http://www.youtube.com/watch?v="+p[3],r="{videoURL:'"+s+"', containment:'self', showControls:true, startAt:0, mute:false, autoPlay:false, loop:false, opacity:1, quality:'highres'}";e.append('<div class="video player"></div>');var d=e.find(".video");d.data("property",r),d.mb_YTPlayer(),d.on("YTPStart",function(){e.addClass("playing")}),d.on("YTPPause",function(){e.removeClass("playing")}),d.on("YTPEnd",function(){e.removeClass("playing")}),i.html('<a class="video-playback youtube" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),$(".video-playback",i).tooltip()}}else if(t.has('a[href*="vimeo.com"]').length){var m=t.find('a[href*="vimeo.com"]'),f=m.attr("href");if(!e.is("has-background")){var c=/vimeo.com\/(\d+)/,g="",p=f.match(c);if(p.length&&""!=p[1]&&(g=p[1]),""!=g){var u="http://vimeo.com/api/v2/video/"+g+".json";$.ajax({type:"GET",url:u,dataType:"json",success:function(a){a.length&&(e.addClass("video-post vimeo"),e.css("background-image",'url("'+a[0].thumbnail_large+'")'))}})}}i.html('<a class="video-playback vimeo" href="'+f+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon");var l=i.find(".video-playback");l.tooltip(),l.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1,callbacks:{open:function(){},close:function(){console.log(l.attr("class"))}}})}else if(t.has('iframe[src^="//player.vimeo.com"]').length){var m=t.find('iframe[src^="//player.vimeo.com"]'),f=m.attr("src"),g="",c=/video\/(\d+)/,p=f.match(c);if(p.length&&""!=p[1]&&(g=p[1]),!e.is("has-background")&&""!=g){var u="http://vimeo.com/api/v2/video/"+g+".json";$.ajax({type:"GET",url:u,dataType:"json",success:function(a){a.length&&(e.addClass("video-post vimeo"),e.css("background-image",'url("'+a[0].thumbnail_large+'")'))}})}i.html('<a class="video-playback vimeo" href="https://vimeo.com/'+g+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon");var l=i.find(".video-playback");l.tooltip(),l.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1,callbacks:{open:function(){},close:function(){console.log(l.html())}}})}else if(t.has('a[href*="soundcloud.com"]').length){var h=t.find('a[href*="soundcloud.com"]'),v="http://api.soundcloud.com/resolve.json?url="+h.attr("href")+"&client_id=425fc6ee65a14efbb9b83b1c49a87ccb";$.getJSON(v,function(a){if(a.id){e.append('<div class="sf-audio-player"></div>');var t=e.find(".sf-audio-player");t.data("track-id",a.id);var o=e.closest("section");i.html('<a class="audio-playback" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon");var s=i.find(".audio-playback");s.tooltip();var n={defaultColor:"rgba(255,255,255,0.4)",loadedColor:"rgba(69,69,69,0.8)",playedColor:"rgba(255,102,0,0.8)"};e.is(".has-background")||!o.is(".odd")&&!$("body").is(".post-template")||(n={defaultColor:"rgba(0,0,0,0.4)",loadedColor:"rgba(69,69,69,0.8)",playedColor:"rgba(255,102,0,0.8)"}),SC.get("/tracks/"+a.id,function(a){var e=new Waveform({container:t[0],innerColor:n.defaultColor});e.dataFromSoundCloudTrack(a);var i=e.optionsForSyncedStream(n),o={onfinish:function(){s.removeClass("playing"),console.log("track finished")}};jQuery.extend(i,o),SC.stream(a.uri,i,function(a){window.scStreams.push(a)})}),t.data("track-index",trackIndex),s.data("track-index",trackIndex),t.addClass("inited"),trackIndex++}})}else if(t.has('iframe[src^="https://w.soundcloud.com"]').length){var h=t.find('iframe[src^="https://w.soundcloud.com"]'),c=/soundcloud.com\/tracks\/(\d+)/,p=h.attr("src").match(c);if(p.length&&""!=p[1]){e.append('<div class="sf-audio-player"></div>');var y=e.find(".sf-audio-player");y.data("track-id",p[1]);var b=e.closest("section");i.html('<a class="audio-playback" href="javascript:;" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon");var k=i.find(".audio-playback");k.tooltip();var w=b.css("background-color");e.is(".has-background")||(w=b.is(".even")||$("body").is(".post-template")?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.4)"),SC.get("/tracks/"+p[1],function(a){var e=new Waveform({container:y[0],innerColor:w});e.dataFromSoundCloudTrack(a);var t=e.optionsForSyncedStream(),i={onfinish:function(){k.removeClass("playing"),console.log("track finished")}};jQuery.extend(t,i),SC.stream(a.uri,t,function(a){window.scStreams.push(a)})}),y.data("track-index",trackIndex),k.data("track-index",trackIndex),y.addClass("inited"),trackIndex++}}else if(e.is(".has-background")){console.log("has-background");var C=e.css("background-image");C=C.replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,""),i.html('<a class="image-popup" href="'+C+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon"),i.find(".image-popup").tooltip(),i.find(".image-popup").magnificPopup({type:"image",tLoading:""})}else if(t.has('img[alt*="image-post"]').length){var T=t.find('img[alt*="image-post"]');e.addClass("has-background "+T.attr("alt")),e.css("background-image",'url("'+T.attr("src")+'")'),i.html('<a class="image-popup" href="'+T.attr("src")+'" data-toggle="tooltip" data-placement="right" title="Try me!"></a>'),i.addClass("has-icon"),i.find(".image-popup").tooltip(),i.find(".image-popup").magnificPopup({type:"image",tLoading:""})}a.addClass("formated")})})},audioSeekingHandler:function(){jQuery(document).on("click",".sf-audio-player",function(a){var e=jQuery(this),t=e.closest(".post-header"),i=jQuery(".header-wrap .line .audio-playback",t);return i.is(".playing")?sfApp.audioScrub(e,a.pageX):console.log("audio not playing"),!1})},audioScrub:function(a,e){var t=window.scStreams[a.data("track-index")],i=Math.floor(Math.min(t.bytesLoaded/t.bytesTotal,e/a.width())*t.durationEstimate);console.log("seek to:"+i),t.setPosition(i)},audioPlayback:function(){jQuery(document).on("click",".audio-playback",function(){{var a=jQuery(this);a.closest(".post-header")}return a.is(".playing")?a.removeClass("playing"):("undefined"!=typeof window.scStreams&&jQuery.each(window.scStreams,function(e){e!=a.data("track-index")&&window.scStreams[e].pause()}),jQuery(".audio-playback.playing").removeClass("playing"),a.addClass("playing")),window.scStreams[a.data("track-index")].togglePause(),!1})},videoPlayback:function(){$(document).on("click",".video-playback:not(.vimeo)",function(){var a=$(this),e=a.closest(".post-header"),t=e.find(".video");return a.is(".playing")?(a.removeClass("playing"),t.pauseYTP()):($(".video-playback.playing").removeClass("playing"),a.addClass("playing"),$(".post-header.video-post.playing .mb_YTVPlayer").each(function(){$(this).pauseYTP()}),t.playYTP()),!1})},getRecentPosts:function(){$(".recent-post").length&&$(".recent-post").each(function(){var a=$(this),e=!1,t=!1,i=-1,o=-1,s="static",n="horizontal",l=500,r=!1,d=!1,c=new Array;c[0]="Jan",c[1]="Feb",c[2]="Mar",c[3]="Apr",c[4]="May",c[5]="June",c[6]="July",c[7]="Aug",c[8]="Sept",c[9]="Oct",c[10]="Nov",c[11]="Dec",a.data("pubdate")&&(e=a.data("pubdate")),a.data("desc")&&(t=a.data("desc"),a.data("character-limit")&&(i=a.data("character-limit"))),a.data("size")&&(o=a.data("size")),a.data("type")&&(s=a.data("type")),"scroll"===s&&(a.data("mode")&&(n=a.data("mode")),a.data("speed")&&(l=a.data("speed")),a.data("pager")&&(r=a.data("pager")),a.data("ticker")&&(d=a.data("ticker"))),$.ajax({type:"GET",url:sfThemeOptions.global.rootUrl+"/rss/",dataType:"xml",success:function(n){if($(n).length){var l,r="",d=0;$("item",n).each(function(){if(!(o>0&&o>d))return!1;if(r+='<li class="clearfix">',e&&(l=new Date($(this).find("pubDate").eq(0).text()),r+='<span class="itemDate">                                                        <span class="date">'+l.getDate()+'</span>                                                        <span class="month">'+c[l.getMonth()]+"</span>                                                    </span>"),r+='<span class="itemContent">',r+='<span class="title">                                                        <a href="'+$(this).find("link").eq(0).text()+'">                                                        '+$(this).find("title").eq(0).text()+"                                                        </a>                                                </span>",t){var a=$(this).find("description").eq(0).text();a=$(a).text(),r+=i>0&&a.length>i?'<span class="desc">'+a.substr(0,i)+' ...                                                            <a href="'+$(this).find("link").eq(0).text()+'">View Â»</a>                                                        </span>':'<span class="desc">'+a+"</span>"}r+="</span>",r+="</li>",d++}),r="static"===s?'<ul class="feedList static">'+r+"</ul>":'<ul class="feedList bxslider">'+r+"</ul>",a.append(r)}}})})},getMaxPagination:function(){return $(".total-page").length?parseInt($(".total-page").html()):void 0},infiniteScrollHandler:function(){if($(".post-list").length&&1==$("body").data("infinite-scroll")){var a=$(".post-list");a.infinitescroll({navSelector:".pagination",nextSelector:".pagination a.older-posts",itemSelector:".post",maxPage:sfApp.getMaxPagination(),loading:{finishedMsg:"No more post to load.",img:sfThemeOptions.global.rootUrl+"/assets/img/loading.gif"}},function(e){var t=sfApp.formatBlogAjax($(e));a.append(t)})}},getFlickr:function(){if($(".flickr-feed").length){var a=1;$(".flickr-feed").each(function(){if(""==flickr_id||"YOUR_FLICKR_ID_HERE"==flickr_id)$(this).html("<li><strong>Please change Flickr user id before use this widget</strong></li>");else{var e='<li><a href="{{image_b}}" target="_blank"><img src="{{image_m}}" alt="{{title}}" /></a></li>',t=15;$(this).data("size")&&(t=$(this).data("size"));var i=!1;$(this).data("popup-preview")&&(i=$(this).data("popup-preview")),i&&(e='<li><a href="{{image_b}}"><img src="{{image_m}}" alt="{{title}}" /></a></li>',a++),$(this).jflickrfeed({limit:t,qstrings:{id:flickr_id},itemTemplate:e},function(){i&&$(this).magnificPopup({delegate:"a",type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{verticalFit:!0,tError:'<a href="%url%">The image #%curr%</a> could not be loaded.'},zoom:{enabled:!0,duration:300,opener:function(a){return a.find("img")}}})})}})}},getInstagram:function(){$(".instagram-feed").length&&((""!=instagram_accessToken||"your-instagram-access-token"!=instagram_accessToken)&&($.fn.spectragram.accessData={accessToken:instagram_accessToken,clientID:instagram_clientID}),$(".instagram-feed").each(function(){if(""==instagram_accessToken||"your-instagram-access-token"==instagram_accessToken)$(this).html("<li><strong>Please change instagram api access info before use this widget</strong></li>");else{var a=15;$(this).data("display")&&(a=$(this).data("display")),$(this).spectragram("getUserFeed",{query:"adrianengine",max:a})}}))},getDribbble:function(){if($(".dribbble-feed").length){$(".dribbble-feed").each(function(){var a=$(this),e=15;a.data("display")&&(e=a.data("display"));var t=!1;a.data("popup-preview")&&(t=a.data("popup-preview")),$.jribbble.getShotsByList("popular",function(e){var i=[];$.each(e.shots,function(a,e){i.push(t?'<li><a href="'+e.image_url+'">':'<li><a href="'+e.url+'">'),i.push('<img src="'+e.image_teaser_url+'" '),i.push('alt="'+e.title+'"></a></li>')}),a.html(i.join("")),t&&a.magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.'}})},{page:1,per_page:e})})}},fitVids:function(){$(".post-content").find('iframe[src^="//www.youtube.com"]').wrap('<div class="video-wrap"></div>'),$(".post-content").find('iframe[src^="//player.vimeo.com"]').wrap('<div class="video-wrap"></div>'),$(".post-content").find(">:first-child").is(".video-wrap")&&$(".post-content").find(">:first-child").removeClass("video-wrap"),$(".post-content .video-wrap").fitVids()},timeToRead:function(){var a=$(".share-box");$("#time-to-read-nofify").length||($('<div id="time-to-read-nofify"></div>').appendTo("body"),$(window).width()>979&&a.appendTo("body"));var e=$("#time-to-read-nofify"),t=$(".post-content");if(!t.data("time-to-read")){var i=Math.round(t.text().split(" ").length/200);t.data("time-to-read",i)}var o=t.data("time-to-read"),s=$(window).height(),n=s/$(document).height()*s,l=$(window).scrollTop()/($(document).height()-s),r=l*(s-n)+n/2-e.height()/2,d=(Math.ceil(o-o*l),"");$(window).scrollTop()<$(".post-footer").offset().top?(2>=l&&(d="Thanks for reading"),d&&e.css("top",r).text(d).fadeIn(100),$(window).width()>979&&a.fadeOut(100)):(e.fadeOut(100),$(window).width()>979&&a.css("top",r-125).fadeIn(100)),null!==sfApp.scrollTimer&&clearTimeout(sfApp.scrollTimer),sfApp.scrollTimer=setTimeout(function(){e.fadeOut()},1e3)},mailchimpHandler:function(){$("#mc-form").length&&$("#mc-form input").not("[type=submit]").jqBootstrapValidation({submitSuccess:function(a,e){e.preventDefault();var t=a.attr("action");if(""==t||"YOUR_WEB_FORM_URL_HERE"==t)return alert("Please config your mailchimp form url for this widget"),!1;t=t.replace("/post?","/post-json?").concat("&c=?");var i={},o=a.serializeArray();return $.each(o,function(a,e){i[e.name]=e.value}),$.ajax({url:t,data:i,success:function(a){alert("success"===a.result?"Got it, you've been added to our newsletter. Thanks for subscribe!":a.result)},dataType:"jsonp",error:function(a,e){console.log("mailchimp ajax submit error: "+e)}}),!1}})},scrollEvent:function(){$(window).scroll(function(){"use strict";if("true"==$(".header").attr("data-sticky")){var a=$(window).scrollTop();a>=$(".header").height()?($(".header").addClass("fixed-top"),$(".logo-container .logo img").length&&!$(".logo-container .logo img").is(".apply-sticked")&&""!=$(".logo-container .logo img").attr("data-sticked-src")&&($(".logo-container .logo img").attr("data-normal-src",$(".logo-container .logo img").attr("src")),$(".logo-container .logo img").attr("src",$(".logo-container .logo img").attr("data-sticked-src")),$(".logo-container .logo img").addClass("apply-sticked"))):($(".header").removeClass("fixed-top"),$(".logo-container .logo img").length&&$(".logo-container .logo img").is(".apply-sticked")&&""!=$(".logo-container .logo img").attr("data-normal-src")&&($(".logo-container .logo img").attr("data-sticked-src",$(".logo-container .logo img").attr("src")),$(".logo-container .logo img").attr("src",$(".logo-container .logo img").attr("data-normal-src")),$(".logo-container .logo img").removeClass("apply-sticked")))}$("body").is(".post-template")&&!$("body").is(".page")&&$(".post-content").length&&sfApp.timeToRead()})},menuEvent:function(){$(".mini-nav-button").length&&$(".mini-nav-button").click(function(){var a=$(".full-screen-nav");a.length||(a=$(".mini-nav"),a.length||(a=$(".standard-nav"))),$(this).is(".active")?($("body").removeClass("open-menu"),a.removeClass("open"),$(this).removeClass("active")):($("body").addClass("open-menu"),a.addClass("open"),$(this).addClass("active"))}),$(".search-button").length&&$(".search-button").click(function(){$("#search-keyword").val("");var a=$(".search-container");$(this).is(".active")?($("body").removeClass("open-search"),a.removeClass("open"),$(this).removeClass("active"),$(".search-result").removeClass("searching")):($("body").addClass("open-search"),a.addClass("open"),$(this).addClass("active"),$("#search-keyword").focus())})},gmapInitialize:function(){if(jQuery(".gmap").length){var a=jQuery(".gmap").data("latitude"),e=jQuery(".gmap").data("longitude"),t=sfApp.hexColor(jQuery(".gmap-container").css("backgroundColor")),i=new google.maps.LatLng(a,e),o={zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,scrollwheel:!1,center:i,styles:[{stylers:[{hue:t,lightness:100}]}]},s=new google.maps.Map(document.getElementById("gmap"),o),n=new google.maps.MarkerImage(sfThemeOptions.global.rootUrl+"/assets/img/map-marker.png",null,null,new google.maps.Point(32,32),new google.maps.Size(64,64));new google.maps.Marker({position:i,flat:!0,icon:n,map:s,optimized:!1,title:"i-am-here",visible:!0})}},hexColor:function(a){var e=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);delete e[0];for(var t=1;3>=t;++t)e[t]=parseInt(e[t]).toString(16),1==e[t].length&&(e[t]="0"+e[t]);return"#"+e.join("")},setCookie:function(a,e){var t=new Date;t.setTime(t.getTime()+864e5),document.cookie=a+"="+e+";path=/;expires="+t.toUTCString()},getCookie:function(a){var e=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)");return e?e[2]:null},searchHandler:function(){$("#search-keyword").keypress(function(a){13==a.which&&(""!=$("#search-keyword").val()&&$("#search-keyword").val().length>=3?($(".search-result").html('<li class="loading-text">Searching ...</li>'),$(".search-result").addClass("searching"),sfApp.search($("#search-keyword").val())):($(".search-result").html('<li class="loading-text">Please enter at least 3 characters!</li>'),$(".search-result").addClass("searching")))})},search:function(a){var e=!1,t=0,i=0;""!=a&&$.ajax({type:"GET",url:sfThemeOptions.global.rootUrl,success:function(o){var s=$(o),n=s.find("section.post").length,l=parseInt(s.find(".total-page").html());i=Math.floor(n*l/15)+1;var r=setInterval(function(){t+=1;var o=sfThemeOptions.global.rootUrl+"/rss/"+t+"/";1==t&&(o=sfThemeOptions.global.rootUrl+"/rss/"),t>i?(clearInterval(r),e||$(".search-result .loading-text").html("Apologies, but no results were found. Please try another keyword!")):$.ajax({type:"GET",url:o,dataType:"xml",success:function(t){$(t).length&&$("item",t).each(function(){($(this).find("title").eq(0).text().toLowerCase().indexOf(a.toLowerCase())>=0||$(this).find("description").eq(0).text().toLowerCase().indexOf(a.toLowerCase())>=0)&&(e=!0,$(".search-result .loading-text").length&&$(".search-result .loading-text").remove(),$(".search-result").append('<li><a href="'+$(this).find("link").eq(0).text()+'">'+$(this).find("title").eq(0).text()+"</a></li>"))})}})},1e3)}})},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1},refreshIntro:function(){var a=$(window).height();if($("#site-intro").length){if($("#site-intro").is(".personal")&&$(".post-list .post").length&&($("#site-intro .author-avatar").html('<img src="'+$(".post-list .post").first().data("author-img")+'" class="img-responsive"/>'),$("#site-intro .author-name").html($(".post-list .post").first().data("author-name")),$("#site-intro .author-bio").html($(".post-list .post").first().data("author-bio"))),"boxed"==$("body").attr("data-site-layout")&&$(window).width()>=1170?$("#site-intro").css("height",Math.floor(80*a/100)+"px"):$("#site-intro").css("height",a+"px"),!$("#site-intro").is(".left-style")&&!$("#site-intro").is(".right-style")){var e=Math.floor($(".intro-text").height()/2);$(".intro-wrap").css("margin-top","-"+e+"px")}$(".intro-wrap").css("opacity","1"),$("#site-intro .more-detail").length&&$("#site-intro .more-detail").css("opacity","1")}if($("body").is(".post-template")&&$(".post-header").length){var t=70;600>=a&&(t=100),$(".post-header").css("height",Math.floor(a*t/100)+"px"),$(".post-header .header-wrap").css("opacity","1")}},misc:function(){if($(".more-detail .scrollDown").click(function(){return $("html, body").animate({scrollTop:$("#start").offset().top-$(".header").outerHeight()+20},500),!1}),$(".more-detail .start").click(function(){return $("html, body").animate({scrollTop:$("#start").offset().top-$(".header").outerHeight()+20},500),!1}),$(".action-list .go-to-blog").click(function(){return $("html, body").animate({scrollTop:$("#start").offset().top-$(".header").outerHeight()+20},500),!1}),$(".totop-btn").length&&$(".totop-btn").click(function(){return $("html, body").animate({scrollTop:0},800),!1
    }),$(".go-to-comment").length&&$(".go-to-comment").click(function(){$("html, body").stop().animate({scrollTop:$(".comment-wrap").offset().top},500)}),$("body").is(".post-template")||$("body").is(".page-template")){var a=$(".post-content").find("img");a.length&&a.each(function(){var a=$(this).attr("alt");if($(this).addClass("img-responsive"),$(this).addClass(a),a.indexOf("no-responsive")>=0&&$(this).removeClass("img-responsive"),a.indexOf("fullscreen-img")>=0){$(this).wrap('<span class="fullscreen-img-wrap"></span>');var e=$(this).closest(".fullscreen-img-wrap");$(this).on("load",function(){e.css({height:$(this).outerHeight()})})}else if(a.indexOf("popup-preview")>=0||$("body").data("auto-image-popup-preview")){$(this).wrap('<a class="popup-preview" href="'+$(this).attr("src")+'"></a>');var t=$(this).parent();a.indexOf("alignright")>=0&&t.addClass("alignright"),a.indexOf("alignleft")>=0&&t.addClass("alignleft"),a.indexOf("aligncenter")>=0&&t.addClass("aligncenter"),$(".popup-preview").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},gallery:{enabled:!0},zoom:{enabled:!0,duration:300}})}})}jQuery(".gmap").length&&(sfApp.gmapInitialize(),google.maps.event.addDomListener(window,"load",sfApp.gmapInitialize),google.maps.event.addDomListener(window,"resize",sfApp.gmapInitialize));var e=$(".full-screen-nav");e.length||(e=$(".mini-nav"),e.length||(e=$(".standard-nav")));var t=window.location.href,i=e.find('a[href="'+t+'"]');i.length&&($("li.active",e).removeClass("active"),i.parent().addClass("active")),$("input, textarea").placeholder()},init:function(){SC.initialize({client_id:"425fc6ee65a14efbb9b83b1c49a87ccb"}),"undefined"==typeof window.scStreams&&(window.scStreams=[]),sfApp.refreshIntro(),sfApp.formatBlog(),sfApp.nextPost(),sfApp.infiniteScrollHandler(),sfApp.fitVids(),sfApp.audioPlayback(),sfApp.videoPlayback(),sfApp.scrollEvent(),sfApp.menuEvent(),sfApp.searchHandler(),sfApp.mailchimpHandler(),sfApp.misc()}};$(document).ready(function(){"use strict";sfApp.init()}),$(window).resize(function(){"use strict";this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},500)}),$(window).bind("resizeEnd",function(){"use strict";sfApp.refreshIntro()});